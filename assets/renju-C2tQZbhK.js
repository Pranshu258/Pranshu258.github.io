import{r as R,j as e,_ as at,R as lt,F as ct,a as dt}from"./index-C1j2rXtY.js";import{S as pt}from"./sharer-12fsyMPp.js";/* empty css              */const F=40,ee=600,re=20;function Pe(n){const o=n-re,r=Math.round(o/F),l=Math.max(0,Math.min(14,r));return re+l*F-F/2}function ut(n,o,r,l){const a=14*F;return n<0||n>a||o<0||o>a?!1:![...r,...l].some(([c,d])=>c===n&&d===o)}const Re=({humanMoves:n,computerMoves:o,userColor:r,onMove:l,disabled:s,lastMove:a,candidateMoves:i=[],winningLine:c=null})=>{const d=R.useRef(null);R.useEffect(()=>{const t=d.current;if(!t)return;const y=t.getContext("2d");u(y,n,o,r,a,i,c)},[n,o,r,a,i,c]);const u=(t,y,g,f,L,M,j)=>{t.clearRect(0,0,ee,ee);const b=t.createLinearGradient(0,0,ee,ee);b.addColorStop(0,"#DEB887"),b.addColorStop(.3,"#D4A574"),b.addColorStop(.6,"#C9956C"),b.addColorStop(1,"#D4A574"),t.fillStyle=b,t.fillRect(0,0,ee,ee),t.strokeStyle="rgba(139, 90, 43, 0.15)",t.lineWidth=1;for(let w=0;w<ee;w+=8)t.beginPath(),t.moveTo(0,w+Math.sin(w*.05)*3),t.lineTo(ee,w+Math.sin(w*.05+2)*3),t.stroke();t.strokeStyle="rgba(0, 0, 0, 0.7)",t.lineWidth=1;const S=re+14*F;for(let w=0;w<15;w++){const E=re+w*F;t.beginPath(),t.moveTo(E,re),t.lineTo(E,S),t.stroke(),t.beginPath(),t.moveTo(re,E),t.lineTo(S,E),t.stroke()}const P=[[3,3],[3,11],[7,7],[11,3],[11,11]];t.fillStyle="#2a1810",P.forEach(([w,E])=>{const C=re+w*F,V=re+E*F;t.beginPath(),t.arc(C,V,4,0,Math.PI*2),t.fill()});const z=F*.4,N=f==="white"?"#FFF":"#000",Y=f==="white"?"#000":"#FFF";if(g.forEach(([w,E])=>{p(t,w+F/2,E+F/2,z,Y)}),y.forEach(([w,E])=>{p(t,w+F/2,E+F/2,z,N)}),L){const[w,E]=L,C=w+F/2,V=E+F/2,q=y.some(([K,ne])=>K===w&&ne===E)&&f==="white"||g.some(([K,ne])=>K===w&&ne===E)&&f==="black";t.save(),t.fillStyle=q?"#e53935":"#ff6b6b",t.beginPath(),t.arc(C,V,z*.25,0,Math.PI*2),t.fill(),t.restore()}if(M&&M.length>0&&M.forEach(({move:w,status:E,score:C})=>{const[V,q]=w,K=V+F/2,ne=q+F/2;if(t.save(),E==="evaluating")t.strokeStyle="#ffc107",t.lineWidth=3,t.setLineDash([4,4]),t.beginPath(),t.arc(K,ne,z+4,0,Math.PI*2),t.stroke();else if(E==="evaluated"){const de=.3+Math.min(Math.max((C+10)/20,0),1)*.5;t.fillStyle=`rgba(33, 150, 243, ${de})`,t.beginPath(),t.arc(K,ne,z*.6,0,Math.PI*2),t.fill(),t.fillStyle="#fff",t.font="bold 10px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(C?.toFixed(0)||"?",K,ne)}t.restore()}),j&&j.length>=2){t.save();const w=j[0],E=j[j.length-1],C=w[0]+F/2,V=w[1]+F/2,q=E[0]+F/2,K=E[1]+F/2;t.strokeStyle="#e53935",t.lineWidth=6,t.lineCap="round",t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=8,t.shadowOffsetX=2,t.shadowOffsetY=2,t.beginPath(),t.moveTo(C,V),t.lineTo(q,K),t.stroke(),t.restore()}},p=(t,y,g,f,L)=>{if(t.save(),t.fillStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.arc(y+2,g+2,f,0,Math.PI*2),t.fill(),L==="#FFF"){const j=t.createRadialGradient(y-f*.3,g-f*.3,f*.1,y,g,f);j.addColorStop(0,"#FFF"),j.addColorStop(1,"#E0E0E0"),t.fillStyle=j}else{const j=t.createRadialGradient(y-f*.3,g-f*.3,f*.1,y,g,f);j.addColorStop(0,"#444"),j.addColorStop(1,"#000"),t.fillStyle=j}t.beginPath(),t.arc(y,g,f,0,Math.PI*2),t.fill();const M=t.createRadialGradient(y-f*.4,g-f*.4,0,y-f*.4,g-f*.4,f*.5);M.addColorStop(0,L==="#FFF"?"rgba(255, 255, 255, 0.8)":"rgba(255, 255, 255, 0.3)"),M.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=M,t.beginPath(),t.arc(y-f*.3,g-f*.3,f*.5,0,Math.PI*2),t.fill(),t.strokeStyle=L==="#FFF"?"#AAA":"#222",t.lineWidth=1,t.beginPath(),t.arc(y,g,f,0,Math.PI*2),t.stroke(),t.restore()},m=t=>{if(s)return;const y=d.current,g=y.getBoundingClientRect(),f=y.width/g.width,L=y.height/g.height,M=(t.clientX-g.left)*f,j=(t.clientY-g.top)*L;l(M,j)};return e.jsx("canvas",{ref:d,width:ee,height:ee,onClick:m,style:{borderRadius:"8px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4), inset 0 0 0 4px rgba(139, 90, 43, 0.5)",cursor:s?"default":"pointer",display:"block",background:"linear-gradient(145deg, #DEB887, #D4A574)",width:"100%",height:"auto",border:"4px solid #8B5A2B"}})},h=40,ie=14*h,ft=10,T={WIN:100,DOUBLE_FOUR:90,FOUR_THREE:85,DOUBLE_THREE:80,BLOCK_FOUR:75,FOUR_OPEN:70,FOUR_HALF:50,BROKEN_FOUR:45,BLOCK_THREE:35,THREE_OPEN:30,THREE_HALF:15,JUMP_THREE:12,TWO_OPEN:5,TWO:3,CENTER_BONUS:2,NONE:0},_=[[1,0],[0,1],[1,1],[1,-1]],ht=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],ye=new Map,gt=1e5;function Ce(n,o){return n<<16|o&65535}function U(n){const o=new Set;for(let r=0;r<n.length;r++)o.add(Ce(n[r][0],n[r][1]));return o}function v(n,o,r){return n.has(Ce(o,r))}function he(n,o){return n>=0&&n<=ie&&o>=0&&o<=ie}function xt(n,o,r){for(const[l,s]of _){let a=1;for(let i=1;i<=5&&v(n,o+h*i*l,r+h*i*s);i++)a++;for(let i=1;i<=5&&v(n,o-h*i*l,r-h*i*s);i++)a++;if(a>5)return!0}return!1}function bt(n,o,r,l){let s=0;for(const[a,i]of _){let c=1,d=!1,u=!1;for(let p=1;p<=4;p++){const m=r+h*p*a,t=l+h*p*i;if(v(n,m,t))c++;else{he(m,t)&&!v(o,m,t)&&(d=!0);break}}for(let p=1;p<=4;p++){const m=r-h*p*a,t=l-h*p*i;if(v(n,m,t))c++;else{he(m,t)&&!v(o,m,t)&&(u=!0);break}}c===4&&(d||u)&&s++}return s}function mt(n,o,r,l){let s=0;for(const[a,i]of _){let c=1,d=!1,u=!1,p=!1,m=!1;for(let t=1;t<=3;t++){const y=r+h*t*a,g=l+h*t*i;if(v(n,y,g))c++;else{if(he(y,g)&&!v(o,y,g)){d=!0;const f=r+h*(t+1)*a,L=l+h*(t+1)*i;he(f,L)&&!v(o,f,L)&&(p=!0)}break}}for(let t=1;t<=3;t++){const y=r-h*t*a,g=l-h*t*i;if(v(n,y,g))c++;else{if(he(y,g)&&!v(o,y,g)){u=!0;const f=r-h*(t+1)*a,L=l-h*(t+1)*i;he(f,L)&&!v(o,f,L)&&(m=!0)}break}}c===3&&d&&u&&(p||m)&&s++}return s}function yt(n,o,r,l){const[s,a]=r,i=U(n),c=U(o);return xt(i,s,a)?{forbidden:!0,reason:"overline"}:bt(i,c,s,a)>=2?{forbidden:!0,reason:"double-four"}:mt(i,c,s,a)>=2?{forbidden:!0,reason:"double-three"}:{forbidden:!1,reason:null}}function _e(n,o,r,l){const s=U(n);for(const[a,i]of _){let c=1;for(let d=1;d<=5&&v(s,o+h*d*a,r+h*d*i);d++)c++;for(let d=1;d<=5&&v(s,o-h*d*a,r-h*d*i);d++)c++;if(c===5)return!0}return!1}function vt(n,o){const r=[...n].sort((s,a)=>s[0]-a[0]||s[1]-a[1]),l=[...o].sort((s,a)=>s[0]-a[0]||s[1]-a[1]);return JSON.stringify([r,l])}function Ee(n,o,r,l,s,a,i=!1){const c=vt(n,o),d=ye.get(c);if(d&&d.depth>=l-r)return r===0?d:d.score;const u=U(n);if(Xe(u,n)||r===l){const g=qe(n,o);return r===0?{score:g,bestMove:null}:g}let p=null,m=-1e3;const t=r%2===0?i:!i,y=Ae(n,o,t);for(const g of y){n.push(g);let f=Ee(o,n,r+1,l,-a,-Math.max(s,m),i);if(typeof f=="object"&&(f=f.score),f=-f,n.pop(),f>m&&(m=f,p=g,m>=a))break}return ye.size<gt&&ye.set(c,{score:m,depth:l-r,bestMove:p}),r===0?{score:m,bestMove:p}:m}async function $e(n,o,r,l,s=!1){const a=[];let i=null;async function c(d,u,p,m,t){const y=U(d);if(Xe(y,d)||p===r)return qe(d,u);let g=null,f=-1e3;const L=p%2===0?s:!s,M=Ae(d,u,L);for(const j of M){p===0&&(l(j,"evaluating"),await new Promise(S=>setTimeout(S,150))),d.push(j);let b=await c(u,d,p+1,-t,-Math.max(m,f));if(b=-b,d.pop(),p===0&&(a.push({move:j,score:b}),l(j,"evaluated",b)),b>f&&(f=b,g=j,f>=t))break}return p===0&&(i=g),f}return await c([...n],[...o],0,-1e3,1e3),{candidates:a,bestMove:i}}function Xe(n,o){for(let r=0;r<o.length;r++){const[l,s]=o[r];for(const[a,i]of _){let c=1;for(let d=1;d<=4&&v(n,l+h*d*a,s+h*d*i);d++)c++;for(let d=1;d<=4&&v(n,l-h*d*a,s-h*d*i);d++)c++;if(c>=5)return!0}}return!1}function Ae(n,o,r=!1){const l=U([...n,...o]),s=new Set;let a=[];for(const[c,d]of[...n,...o])for(const[u,p]of ht){const m=c+h*u,t=d+h*p,y=Ce(m,t);!l.has(y)&&!s.has(y)&&m>=0&&m<=ie&&t>=0&&t<=ie&&(s.add(y),a.push([m,t]))}if(r){const c=a.filter(d=>!yt(n,o,d).forbidden);c.length>0&&(a=c)}const i=a.map(c=>({move:c,score:jt(n,o,c)}));return i.sort((c,d)=>d.score-c.score),i.slice(0,ft).map(c=>c.move)}function jt(n,o,r){const[l,s]=r,a=U(n),i=U(o);let c=0,d=0,u=0;for(const[y,g]of _){let f=0,L=0,M=0,j=0;for(let b=1;b<=4;b++){const S=l+h*b*y,P=s+h*b*g;if(v(a,S,P))f++;else{if(v(i,S,P))break;if(j===0&&b<=3){const z=l+h*(b+1)*y,N=s+h*(b+1)*g;if(v(a,z,N)){j++;continue}}M++;break}}for(let b=1;b<=4;b++){const S=l-h*b*y,P=s-h*b*g;if(v(a,S,P))f++;else{if(v(i,S,P))break;if(j===0&&b<=3){const z=l-h*(b+1)*y,N=s-h*(b+1)*g;if(v(a,z,N)){j++;continue}}M++;break}}for(let b=1;b<=4;b++){const S=l+h*b*y,P=s+h*b*g;if(v(i,S,P))L++;else break}for(let b=1;b<=4;b++){const S=l-h*b*y,P=s-h*b*g;if(v(i,S,P))L++;else break}f>=4?(c+=T.WIN,u++):f===3&&j===1?c+=T.BROKEN_FOUR:f===3&&M===2?(c+=T.FOUR_OPEN,u++):f===3?c+=T.FOUR_HALF:f===2&&j===1&&M>=1?c+=T.JUMP_THREE:f===2&&M===2?(c+=T.THREE_OPEN,d++):f===2?c+=T.THREE_HALF:f===1&&M===2?c+=T.TWO_OPEN:f===1&&(c+=T.TWO),L>=4?c+=T.BLOCK_FOUR:L===3&&(c+=T.BLOCK_THREE)}u>=2&&(c+=T.DOUBLE_FOUR),u>=1&&d>=1&&(c+=T.FOUR_THREE),d>=2&&(c+=T.DOUBLE_THREE);const p=ie/2,m=ie/2;return Math.abs(l-p)+Math.abs(s-m)<h*3&&(c+=T.CENTER_BONUS),c}function qe(n,o){if(n.length===0)return 0;const r=n[n.length-1][0],l=n[n.length-1][1],s=U(n.slice(0,-1)),a=U(o);if(Ne(s,r,l))return T.WIN;if(Ne(a,r,l))return T.BLOCK_FOUR;const i=wt(s,a,r,l);if(i.openFours>=2)return T.DOUBLE_FOUR;if(i.openFours>=1&&i.openThrees>=1)return T.FOUR_THREE;if(i.openThrees>=2)return T.DOUBLE_THREE;const c=Mt(s,a,r,l);if(c>0)return c;if(kt(s,r,l))return T.BROKEN_FOUR;if(He(a,s,r,l)>0)return T.BLOCK_THREE;const d=He(s,a,r,l);if(d>0)return d;if(St(s,a,r,l))return T.JUMP_THREE;if(Rt(s,a,r,l))return T.TWO_OPEN;if(Lt(s,r,l))return T.TWO;const u=ie/2,p=ie/2;return Math.abs(r-u)+Math.abs(l-p)<h*3?T.CENTER_BONUS:T.NONE}function wt(n,o,r,l){let s=0,a=0;for(const[i,c]of _){let d=0,u=0;for(let p=1;p<=4;p++){const m=r+h*p*i,t=l+h*p*c;if(v(n,m,t))d++;else{v(o,m,t)||u++;break}}for(let p=1;p<=4;p++){const m=r-h*p*i,t=l-h*p*c;if(v(n,m,t))d++;else{v(o,m,t)||u++;break}}d>=3&&u>=1?a++:d===2&&u===2&&s++}return{openThrees:s,openFours:a}}function kt(n,o,r){for(const[l,s]of _)for(let a=-3;a<=0;a++){let i=0,c=0,d=!1;for(let u=0;u<5;u++){const p=a+u,m=o+h*p*l,t=r+h*p*s;p===0?(d=!0,i++):v(n,m,t)?i++:c++}if(i===4&&c===1&&d)return!0}return!1}function St(n,o,r,l){for(const[s,a]of _)for(const i of[1,-1]){const c=r+h*1*i*s,d=l+h*1*i*a,u=r+h*2*i*s,p=l+h*2*i*a,m=r+h*3*i*s,t=l+h*3*i*a;if(!v(n,c,d)&&!v(o,c,d)&&v(n,u,p)&&v(n,m,t))return!0}return!1}function Ne(n,o,r){for(const[l,s]of _){let a=0;for(let i=1;i<=4&&v(n,o+h*i*l,r+h*i*s);i++)a++;for(let i=1;i<=4&&v(n,o-h*i*l,r-h*i*s);i++)a++;if(a>=4)return!0}return!1}function Mt(n,o,r,l){for(const[s,a]of _){let i=0,c=0;for(let d=1;d<=4;d++){const u=r+h*d*s,p=l+h*d*a;if(v(n,u,p))i++;else{v(o,u,p)||c++;break}}for(let d=1;d<=4;d++){const u=r-h*d*s,p=l-h*d*a;if(v(n,u,p))i++;else{v(o,u,p)||c++;break}}if(i>=3)return c===2?T.FOUR_OPEN:c===1?T.FOUR_HALF:0}return 0}function He(n,o,r,l){for(const[s,a]of _){let i=0,c=0;for(let d=1;d<=3;d++){const u=r+h*d*s,p=l+h*d*a;if(v(n,u,p))i++;else{v(o,u,p)||c++;break}}for(let d=1;d<=3;d++){const u=r-h*d*s,p=l-h*d*a;if(v(n,u,p))i++;else{v(o,u,p)||c++;break}}if(i>=2)return c===2?T.THREE_OPEN:c===1?T.THREE_HALF:0}return 0}function Lt(n,o,r){for(const[l,s]of _)if(v(n,o+h*l,r+h*s)||v(n,o-h*l,r-h*s))return!0;return!1}function Rt(n,o,r,l){for(const[s,a]of _){let i=0,c=0;const d=r+h*s,u=l+h*a;if(v(n,d,u)){i++;const t=r+h*2*s,y=l+h*2*a;!v(n,t,y)&&!v(o,t,y)&&c++}const p=r-h*s,m=l-h*a;if(v(n,p,m)){i++;const t=r-h*2*s,y=l-h*2*a;!v(n,t,y)&&!v(o,t,y)&&c++}if(i>=1&&c===2)return!0}return!1}function Te(n,o,r){const l=U(n);for(const[s,a]of _){let i=1;for(let c=1;c<=4&&v(l,o+h*c*s,r+h*c*a);c++)i++;for(let c=1;c<=4&&v(l,o-h*c*s,r-h*c*a);c++)i++;if(i>=5)return!0}return!1}function be(n,o,r){const l=U(n);for(const[s,a]of _){const i=[[o,r]];for(let c=1;c<=4;c++){const d=o+h*c*s,u=r+h*c*a;if(v(l,d,u))i.push([d,u]);else break}for(let c=1;c<=4;c++){const d=o-h*c*s,u=r-h*c*a;if(v(l,d,u))i.unshift([d,u]);else break}if(i.length>=5)return i.slice(0,5)}return null}function De(){ye.clear()}let Ie=null;async function Tt(){return Ie||(Ie=await at(()=>import("./index-DFLBea7M.js"),[])),Ie}const W=40,Be="ABCDEFGHIJKLMNO";function ce(n,o){const r=n/W,l=o/W;return`${Be[r]}${l+1}`}function Ge(n){const o=n.trim().match(/^([A-Oa-o])(\d{1,2})$/);if(!o)return null;const r=Be.indexOf(o[1].toUpperCase()),l=parseInt(o[2],10)-1;return r<0||r>14||l<0||l>14?null:[r*W,l*W]}function It(n,o){const r=Array.from({length:15},()=>Array(15).fill("."));for(const[s,a]of n)r[a/W][s/W]="X";for(const[s,a]of o)r[a/W][s/W]="O";let l="   "+Be.split("").join(" ")+`
`;for(let s=0;s<15;s++){const a=String(s+1).padStart(2," ");l+=`${a} ${r[s].join(" ")}
`}return l}function Et(n,o){const r=[],l=Math.max(n.length,o.length);for(let s=0;s<l;s++)s<n.length&&r.push(`${r.length+1}. ${ce(...n[s])} (Black)`),s<o.length&&r.push(`${r.length+1}. ${ce(...o[s])} (White)`);return r.join("  ")}function Ue(n,o,r){const l=[[1,0],[0,1],[1,1],[1,-1]],s=Array.from({length:15},()=>Array(15).fill(".")),a=new Set,i=new Set;for(const[u,p]of n){const m=u/W,t=p/W;s[t][m]="A",a.add(`${m},${t}`)}for(const[u,p]of o){const m=u/W,t=p/W;s[t][m]="D"}for(const[u,p]of r)i.add(`${u/W},${p/W}`);const c=[],d=new Set;for(const[u,p]of n){const m=u/W,t=p/W;for(const[y,g]of l){const f=[],L=[];let M=m,j=t;for(;M-y>=0&&M-y<=14&&j-g>=0&&j-g<=14&&a.has(`${M-y},${j-g}`);)M-=y,j-=g;let b=M,S=j;for(;b>=0&&b<=14&&S>=0&&S<=14&&(a.has(`${b},${S}`)||!i.has(`${b},${S}`)&&f.length>0);){if(a.has(`${b},${S}`))f.push([b,S]);else{if(i.has(`${b},${S}`))break;break}b+=y,S+=g}if(f.length<3)continue;const P=f.map(([w,E])=>`${w},${E}`).sort().join("|")+`|${y},${g}`;if(d.has(P))continue;d.add(P);let z=0;const N=M-y,Y=j-g;N>=0&&N<=14&&Y>=0&&Y<=14&&!i.has(`${N},${Y}`)&&(z++,L.push(ce(N*W,Y*W))),b>=0&&b<=14&&S>=0&&S<=14&&!i.has(`${b},${S}`)&&(z++,L.push(ce(b*W,S*W))),z>0&&c.push({count:f.length,openEnds:z,blockingMoves:L,stones:f.map(([w,E])=>ce(w*W,E*W))})}}return c.sort((u,p)=>p.count-u.count||p.openEnds-u.openEnds),c}function Je(n,o,r,l=!0){const s=It(n,o),a=Et(n,o);let i="";if(l){const m=n,t=o,y=[...n,...o],g=Ue(t,m,y),L=Ue(m,t,y).filter(b=>b.count>=4);L.length>0&&(i+=`
*** YOU CAN WIN! You have 4+ in a row. Play: `+L[0].blockingMoves.join(" or ")+` ***
`);const M=g.filter(b=>b.count>=4),j=g.filter(b=>b.count===3&&b.openEnds===2);if(M.length>0)for(const b of M)i+=`
!!! CRITICAL: Opponent has ${b.count} in a row at ${b.stones.join(",")}. BLOCK NOW at: ${b.blockingMoves.join(" or ")} !!!
`;if(j.length>0)for(const b of j)i+=`
!! WARNING: Opponent has open 3 at ${b.stones.join(",")}. Block at: ${b.blockingMoves.join(" or ")} !!
`}const d="You are an expert Renju player on a 15Ã—15 board. Columns A-O, rows 1-15. X=Black, O=White. You are X (Black). Black has restrictions: no double-three (3-3), no double-four (4-4), no overline (6+). A forbidden move loses immediately. Respond with ONLY your move coordinate like H8. Nothing else.",u=i?`${i}
Tactical priorities:
1. Play any winning move shown above immediately.
2. Block any CRITICAL/WARNING threat above â€” failure to block loses.
3. Create forks (multiple simultaneous threats the opponent cannot all block).
4. Build open threes that can become open fours.
5. Control center and adjacent intersections.`:`Tactical priorities:
1. Check for an immediate winning move (you have 4 in a line with an open end).
2. Block opponent's fours (straight or broken) â€” they win next turn if unblocked.
3. Block opponent's open threes â€” they become unstoppable fours if unblocked.
4. Create forks: multiple simultaneous threats (e.g. open-three + four) the opponent cannot all block.
5. Build open threes near your existing stones to set up forcing sequences.
6. Control center and key intersections.
7. Before playing, verify your move does not create a forbidden double-three, double-four, or overline.`,p=`Board:
${s}
Move history: ${a||"none"}

${u}

Pick an empty intersection (.) for your move.

Your move:`;return{system:d,user:p}}function Ze(n){const o=Ge(n.trim());if(o)return o;const r=/\b([A-Oa-o])(1[0-5]|[1-9])\b/g;let l;for(;(l=r.exec(n))!==null;){const s=Ge(l[0]);if(s)return s}return null}async function Ct(n,o,r,l,s,a=3,i=!0){const{endpoint:c,deploymentName:d,apiKey:u,apiVersion:p}=n,m=`${c.replace(/\/+$/,"")}/openai/deployments/${d}/chat/completions?api-version=${p||"2024-02-01"}`,{system:t,user:y}=Je(o,r,l,i);console.log(`[LLM] System prompt:
${t}`),console.log(`[LLM] User prompt:
${y}`);for(let g=0;g<a;g++)try{const f=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json","api-key":u},body:JSON.stringify({messages:[{role:"developer",content:t},{role:"user",content:y}],max_completion_tokens:2048})});if(!f.ok){const S=await f.text();throw console.error(`[LLM] Azure API error ${f.status}:`,S),new Error(`LLM call failed (${f.status})`)}const L=await f.json(),M=L.choices?.[0]?.message?.content??"";console.log(`[LLM] Turn response (attempt ${g+1}):`,M),console.log("[LLM] Full API response:",JSON.stringify(L,null,2));const j=Ze(M);if(!j){console.warn(`[LLM] Attempt ${g+1}: Could not parse move from "${M}"`);continue}if(s.some(([S,P])=>S===j[0]&&P===j[1])){console.warn(`[LLM] Attempt ${g+1}: Move ${M} is already occupied`);continue}return{move:j,raw:M}}catch(f){if(console.error(`[LLM] Attempt ${g+1} error:`,f),g===a-1)return{move:null,raw:"",error:f.message}}return{move:null,raw:"",error:"Failed to get a valid move after retries"}}const Ye=[{id:"Qwen2.5-1.5B-Instruct-q4f16_1-MLC",label:"Qwen2.5 1.5B (fast)",size:"~1 GB"},{id:"Llama-3.2-3B-Instruct-q4f16_1-MLC",label:"Llama 3.2 3B",size:"~2 GB"},{id:"Phi-3.5-mini-instruct-q4f16_1-MLC",label:"Phi-3.5 Mini 3.8B",size:"~2.5 GB"},{id:"SmolLM2-1.7B-Instruct-q4f16_1-MLC",label:"SmolLM2 1.7B (tiny)",size:"~1 GB"}];let se=null,ge=null;async function At(n,o){if(se&&ge===n)return!0;se&&(se=null,ge=null);try{return se=await(await Tt()).CreateMLCEngine(n,{initProgressCallback:l=>{o&&o({text:l.text,progress:l.progress})}}),ge=n,!0}catch(r){throw console.error("[WebLLM] Failed to load model:",r),se=null,ge=null,r}}async function Bt(n,o,r,l,s=3,a=!0){if(!se)return{move:null,raw:"",error:"WebLLM model not loaded"};const{system:i,user:c}=Je(n,o,r,a);console.log(`[WebLLM] System prompt:
${i}`),console.log(`[WebLLM] User prompt:
${c}`);for(let d=0;d<s;d++)try{const p=(await se.chat.completions.create({messages:[{role:"system",content:i},{role:"user",content:c}],max_tokens:32,temperature:.3})).choices?.[0]?.message?.content??"";console.log(`[WebLLM] Response (attempt ${d+1}):`,p);const m=Ze(p);if(!m){console.warn(`[WebLLM] Attempt ${d+1}: Could not parse move from "${p}"`);continue}if(l.some(([y,g])=>y===m[0]&&g===m[1])){console.warn(`[WebLLM] Attempt ${d+1}: Move ${p} is already occupied`);continue}return{move:m,raw:p}}catch(u){if(console.error(`[WebLLM] Attempt ${d+1} error:`,u),d===s-1)return{move:null,raw:"",error:u.message}}return{move:null,raw:"",error:"Failed to get a valid move after retries"}}function Ve(){return se!==null}function Ot(){return ge}const Wt=()=>new(window.AudioContext||window.webkitAudioContext),me=n=>{if(!n)return;const o=n.createOscillator(),r=n.createGain();o.connect(r),r.connect(n.destination),o.frequency.value=800,o.type="sine",r.gain.setValueAtTime(.15,n.currentTime),r.gain.exponentialRampToValueAtTime(.001,n.currentTime+.1),o.start(n.currentTime),o.stop(n.currentTime+.1)},Ft=n=>{if(!n)return;[523,659,784,1047].forEach((r,l)=>{const s=n.createOscillator(),a=n.createGain();s.connect(a),a.connect(n.destination),s.frequency.value=r,s.type="sine";const i=n.currentTime+l*.12;a.gain.setValueAtTime(.2,i),a.gain.exponentialRampToValueAtTime(.001,i+.3),s.start(i),s.stop(i+.3)})},zt=n=>{if(!n)return;[392,330,262].forEach((r,l)=>{const s=n.createOscillator(),a=n.createGain();s.connect(a),a.connect(n.destination),s.frequency.value=r,s.type="sine";const i=n.currentTime+l*.2;a.gain.setValueAtTime(.2,i),a.gain.exponentialRampToValueAtTime(.001,i+.4),s.start(i),s.stop(i+.4)})},fe={easy:{depth:1,mistakeRate:.4,label:"Easy",emoji:"ðŸŒ±"},medium:{depth:2,mistakeRate:.15,label:"Medium",emoji:"âš”ï¸"},hard:{depth:4,mistakeRate:0,label:"Hard",emoji:"ðŸ”¥"},adaptive:{depth:1,mistakeRate:0,label:"Adaptive",emoji:"ðŸ§ ",adaptive:!0}};function Ke({mode:n="pvai"}){const[o,r]=R.useState("setup"),[l,s]=R.useState("black"),[a,i]=R.useState([]),[c,d]=R.useState([]),[u,p]=R.useState("human"),[m,t]=R.useState(0),[y,g]=R.useState(null),[f,L]=R.useState(!1),[M,j]=R.useState([]),[b,S]=R.useState(null),[P,z]=R.useState(null),[N,Y]=R.useState(1),[w,E]=R.useState(!0),[C,V]=R.useState(n),[q,K]=R.useState({endpoint:"",deploymentName:"",apiKey:"",apiVersion:"2024-02-01"}),[ne,xe]=R.useState([]),[de,ae]=R.useState(null),[ve,pe]=R.useState(!1),[oe,Qe]=R.useState(!0),[X,et]=R.useState("easy"),[J,Oe]=R.useState("webllm"),[je,tt]=R.useState(Ye[0].id),[ue,we]=R.useState(!1),[We,Fe]=R.useState({text:"",progress:0}),Z=R.useRef(!1),te=R.useRef(null),ze=R.useCallback(()=>(te.current||(te.current=Wt()),te.current),[]),nt=()=>{const x=fe[X];return x&&!x.adaptive?x.depth:Math.floor(Math.random()*N)+1};R.useEffect(()=>{o==="won"?(C!=="aivsllm"&&X==="adaptive"&&Math.random()<.5&&Y(x=>Math.min(x+1,10)),w&&Ft(te.current)):o==="lost"&&(C!=="aivsllm"&&X==="adaptive"&&Y(x=>Math.max(x-1,1)),w&&zt(te.current))},[o,w,C,X]);const ke=x=>{ze();const D=fe[X];D&&!D.adaptive?Y(D.depth):Y(1),s(x),r("playing"),i([]),d([]),t(1),g(null),S(null),z(null),De();const k=280;x==="black"?(i([[k,k]]),g([k,k]),p("computer")):(d([[k,k]]),g([k,k]),p("human"))},ot=R.useCallback((x,D)=>{if(o!=="playing"||u!=="human")return;const k=Pe(x),B=Pe(D);if(!ut(k,B,a,c))return;const A=[...a,[k,B]];if(i(A),g([k,B]),w&&me(te.current),Te(A,k,B)){S(be(A,k,B)),r("won");return}t(m+1),p("computer")},[o,u,a,c,m]);R.useEffect(()=>{if(C!=="aivsllm"&&o==="playing"&&u==="computer"){let x=!1;return(async()=>{if(await new Promise(A=>setTimeout(A,300)),x)return;const k=[...c],B=nt();if(z(B),f){j([]);const H=await $e(k,a,B,(O,I,G)=>{x||j($=>$.find(Q=>Q.move[0]===O[0]&&Q.move[1]===O[1])?$.map(Q=>Q.move[0]===O[0]&&Q.move[1]===O[1]?{...Q,status:I,score:G}:Q):[...$,{move:O,status:I,score:G}])},l==="white");if(H.bestMove&&k.push(H.bestMove),await new Promise(O=>setTimeout(O,300)),x)return;j([])}else{const A=l==="white";let O=Ee(k,a,0,B,-1e3,1e3,A).bestMove;const I=fe[X];if(I&&I.mistakeRate&&O&&Math.random()<I.mistakeRate){const G=Ae(k,a,A);if(G.length>2){const $=G.slice(Math.floor(G.length/2));O=$[Math.floor(Math.random()*$.length)]}}O&&k.push(O)}if(!x&&k.length>c.length){const A=k[k.length-1];if(d(k),g(A),w&&me(te.current),l==="white"?_e(k,A[0],A[1]):Te(k,A[0],A[1])){S(be(k,A[0],A[1])),r("lost");return}t(m+1),p("human")}})(),()=>{x=!0}}},[u,o,C,c,a,m,f]);const rt=()=>{C==="aivsllm"?Se():ke(l)},Se=()=>{ze(),Z.current=!1,V("aivsllm"),r("playing");const x=280;i([[x,x]]),d([]),t(2),g([x,x]),S(null),z(null),xe([{turn:1,player:"LLM (Black)",notation:"H8",raw:"auto: center opening"}]),ae(null),pe(!0),De(),p("computer")};R.useEffect(()=>{if(C!=="aivsllm"||o!=="playing"||!ve)return;let x=!1;return Z.current=!1,(async()=>{let k=[...a],B=[...c],A=u,H=m;for(;;){if(x||Z.current||(await new Promise(O=>setTimeout(O,600)),x||Z.current))return;if(A==="human"){p("human");const O=[...k,...B],I=J==="webllm"?await Bt(k,B,"black",O,3,oe):await Ct(q,k,B,"black",O,3,oe);if(x||Z.current)return;if(!I.move){ae(I.error||"LLM failed to produce a valid move"),pe(!1);return}if(k=[...k,I.move],i([...k]),g(I.move),w&&me(te.current),xe(G=>[...G,{turn:H,player:"LLM (Black)",notation:ce(...I.move),raw:I.raw}]),_e(k,I.move[0],I.move[1])){S(be(k,I.move[0],I.move[1])),r("lost"),pe(!1);return}H++,t(H),A="computer"}else{p("computer");const O=1;z(O);let I=null;if(f){if(j([]),I=(await $e([...B],[...k],O,($,Me,Q)=>{x||Z.current||j(Le=>Le.find(le=>le.move[0]===$[0]&&le.move[1]===$[1])?Le.map(le=>le.move[0]===$[0]&&le.move[1]===$[1]?{...le,status:Me,score:Q}:le):[...Le,{move:$,status:Me,score:Q}])},!1)).bestMove,await new Promise($=>setTimeout($,300)),x||Z.current)return;j([])}else I=Ee([...B],[...k],0,O,-1e3,1e3,!1).bestMove;if(x||Z.current)return;if(!I){ae("Local AI failed to find a move"),pe(!1);return}if(B=[...B,I],d([...B]),g(I),w&&me(te.current),xe(G=>[...G,{turn:H,player:"AI (White)",notation:ce(...I)}]),Te(B,I[0],I[1])){S(be(B,I[0],I[1])),r("won"),pe(!1);return}H++,t(H),A="human"}}})(),()=>{x=!0,Z.current=!0}},[ve]);const st=()=>{Z.current=!0,pe(!1),r("setup")};if(o==="setup")return n==="pvai"?e.jsx("div",{style:{padding:"20px 0",margin:"20px 0",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"25px"},children:[e.jsxs("div",{style:{position:"relative",width:"600px",flexShrink:0},children:[e.jsx(Re,{humanMoves:[],computerMoves:[],userColor:"black",onMove:()=>{},disabled:!0,lastMove:null,candidateMoves:[]}),e.jsxs("div",{style:{position:"absolute",top:"50%",left:0,right:0,transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.85)",padding:"36px 20px",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",backdropFilter:"blur(12px)",borderTop:"1px solid rgba(255, 255, 255, 0.08)",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)"},children:[e.jsx("div",{style:{fontSize:"2.2em",fontWeight:"600",letterSpacing:"8px",textTransform:"uppercase",marginBottom:"8px",background:"linear-gradient(135deg, #fff 0%, #94a3b8 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Renju"}),e.jsx("div",{style:{fontSize:"0.85em",color:"#94a3b8",marginBottom:"16px",fontWeight:"500"},children:"Five in a row wins"}),e.jsx("div",{style:{display:"flex",gap:"6px",justifyContent:"center",marginBottom:"14px"},children:Object.entries(fe).map(([x,D])=>e.jsxs("button",{onClick:()=>et(x),style:{padding:"5px 12px",background:X===x?"rgba(99, 102, 241, 0.85)":"rgba(255, 255, 255, 0.08)",border:X===x?"1px solid rgba(99, 102, 241, 0.9)":"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"20px",color:"#fff",cursor:"pointer",fontSize:"0.75em",fontWeight:X===x?"600":"400",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:D.emoji}),e.jsx("span",{children:D.label})]},x))}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#fff",marginBottom:"20px",fontWeight:"500",padding:"8px 16px",background:"linear-gradient(135deg, #6366f1, #4f46e5)",borderRadius:"6px",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",letterSpacing:"0.3px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸ‘‡"}),e.jsx("span",{children:"Choose your side to begin"})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>{V("pvai"),ke("black")},style:{padding:"20px 32px",background:"#1a1a1a",border:"none",borderRadius:"16px",color:"#fff",cursor:"pointer",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05)",minWidth:"160px"},onMouseOver:x=>{x.currentTarget.style.transform="translateY(-3px)",x.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1)"},onMouseOut:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"radial-gradient(circle at 30% 30%, #4a4a4a, #000)",boxShadow:"0 2px 8px rgba(0,0,0,0.5), inset 0 -2px 4px rgba(0,0,0,0.3)"}}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1em"},children:"Black"}),e.jsx("div",{style:{opacity:.5,fontSize:"0.75em"},children:"You play first"})]})]}),e.jsxs("button",{onClick:()=>{V("pvai"),ke("white")},style:{padding:"20px 32px",background:"#f5f5f5",border:"none",borderRadius:"16px",color:"#1a1a1a",cursor:"pointer",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8)",minWidth:"160px"},onMouseOver:x=>{x.currentTarget.style.transform="translateY(-3px)",x.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.9)"},onMouseOut:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.8)"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"radial-gradient(circle at 30% 30%, #fff, #d4d4d4)",boxShadow:"0 2px 8px rgba(0,0,0,0.2), inset 0 -2px 4px rgba(0,0,0,0.05)"}}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1em"},children:"White"}),e.jsx("div",{style:{opacity:.5,fontSize:"0.75em"},children:"AI plays first"})]})]})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"12px",width:"220px",flexShrink:0,alignSelf:"stretch"},children:e.jsxs("div",{style:{color:"var(--surface-text-color)",padding:"18px",background:"var(--blog-surface-background)",borderRadius:"12px",border:"1px solid var(--blog-surface-border, #333)"},children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"1em",marginBottom:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸ“–"})," How to Play"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",fontSize:"0.8em",opacity:.8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{opacity:.7},children:"âš«"}),e.jsx("span",{children:"Black moves first"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{opacity:.7},children:"ðŸŽ¯"}),e.jsx("span",{children:"Get 5 in a row to win"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{opacity:.7},children:"ðŸ¤–"}),e.jsx("span",{children:"AI adapts to your skill"})]})]})]})})]})}):e.jsx("div",{style:{padding:"20px 0",margin:"20px 0",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"25px"},children:[e.jsxs("div",{style:{position:"relative",width:"600px",flexShrink:0},children:[e.jsx(Re,{humanMoves:[],computerMoves:[],userColor:"black",onMove:()=>{},disabled:!0,lastMove:null,candidateMoves:[]}),e.jsxs("div",{style:{position:"absolute",top:"50%",left:0,right:0,transform:"translateY(-50%)",background:"rgba(0, 0, 0, 0.85)",padding:"36px 20px",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",backdropFilter:"blur(12px)",borderTop:"1px solid rgba(255, 255, 255, 0.08)",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)"},children:[e.jsx("div",{style:{fontSize:"2.2em",fontWeight:"600",letterSpacing:"8px",textTransform:"uppercase",marginBottom:"8px",background:"linear-gradient(135deg, #fff 0%, #94a3b8 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"AI vs LLM"}),e.jsx("div",{style:{fontSize:"0.85em",color:"#94a3b8",marginBottom:"20px",fontWeight:"500"},children:"Watch the minimax AI battle a language model"}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"14px"},children:[e.jsxs("button",{onClick:()=>Oe("webllm"),style:{padding:"5px 14px",background:J==="webllm"?"rgba(99, 102, 241, 0.85)":"rgba(255, 255, 255, 0.08)",border:J==="webllm"?"1px solid rgba(99, 102, 241, 0.9)":"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"20px",color:"#fff",cursor:"pointer",fontSize:"0.78em",fontWeight:J==="webllm"?"600":"400",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"ðŸ’»"})," On-Device"]}),e.jsxs("button",{onClick:()=>Oe("azure"),style:{padding:"5px 14px",background:J==="azure"?"rgba(99, 102, 241, 0.85)":"rgba(255, 255, 255, 0.08)",border:J==="azure"?"1px solid rgba(99, 102, 241, 0.9)":"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"20px",color:"#fff",cursor:"pointer",fontSize:"0.78em",fontWeight:J==="azure"?"600":"400",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"â˜ï¸"})," Azure AI"]})]}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#fff",marginBottom:"10px",fontWeight:"500",padding:"8px 16px",background:"linear-gradient(135deg, #6366f1, #4f46e5)",borderRadius:"6px",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",letterSpacing:"0.3px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("span",{children:J==="webllm"?"ðŸ’»":"â˜ï¸"}),e.jsx("span",{children:J==="webllm"?"Select a model and load it":"Configure Azure AI to begin"})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"12px",width:"220px",flexShrink:0,alignSelf:"stretch"},children:e.jsxs("div",{style:{color:"var(--surface-text-color)",padding:"18px",background:"var(--blog-surface-background)",borderRadius:"12px",border:"1px solid var(--blog-surface-border, #333)"},children:[J==="webllm"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"0.95em",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸ’»"})," On-Device Model"]}),e.jsx("div",{style:{fontSize:"0.75em",opacity:.6,marginBottom:"10px"},children:"Runs in your browser via WebGPU"}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"0.75em",opacity:.7,marginBottom:"3px"},children:"Model"}),e.jsx("select",{value:je,onChange:x=>tt(x.target.value),style:{width:"100%",padding:"6px 8px",fontSize:"0.8em",borderRadius:"6px",border:"1px solid var(--blog-surface-border, #444)",background:"var(--blog-surface-background, #1a1a1a)",color:"var(--surface-text-color)",boxSizing:"border-box",outline:"none",cursor:"pointer"},children:Ye.map(x=>e.jsxs("option",{value:x.id,children:[x.label," (",x.size,")"]},x.id))})]}),ue?e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"0.72em",opacity:.8,marginBottom:"6px",wordBreak:"break-word",lineHeight:"1.4"},children:We.text||"Initializing..."}),e.jsx("div",{style:{width:"100%",height:"6px",background:"var(--blog-surface-border, #333)",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.round(We.progress*100)}%`,height:"100%",background:"linear-gradient(135deg, #6366f1, #4f46e5)",borderRadius:"3px",transition:"width 0.3s"}})})]}):Ve()?e.jsxs("div",{style:{fontSize:"0.75em",color:"#22c55e",marginBottom:"8px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{children:"âœ“"})," Model ready"]}):null,e.jsxs("button",{disabled:ue,onClick:async()=>{we(!0),Fe({text:"",progress:0}),ae(null);try{await At(je,x=>Fe(x)),we(!1),Se()}catch(x){we(!1),ae("Failed to load model: "+x.message)}},style:{marginTop:"6px",padding:"10px 14px",background:ue?"#555":"linear-gradient(135deg, #6366f1, #4f46e5)",border:"none",borderRadius:"10px",color:"#fff",cursor:ue?"not-allowed":"pointer",fontSize:"0.85em",fontWeight:"600",transition:"all 0.2s",boxShadow:ue?"none":"0 4px 14px rgba(99, 102, 241, 0.35)",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"40px"},children:[e.jsx("span",{children:"ðŸ¤–"}),e.jsx("span",{children:ue?"Loading...":Ve()&&Ot()===je?"Start AI vs LLM":"Load Model & Start"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",fontSize:"0.95em",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"â˜ï¸"})," Azure AI Config"]}),e.jsx("div",{style:{fontSize:"0.75em",opacity:.6,marginBottom:"10px"},children:"Requires an Azure OpenAI deployment"}),[{key:"endpoint",label:"Endpoint",placeholder:"https://....openai.azure.com"},{key:"apiKey",label:"API Key",placeholder:"your-api-key",type:"password"},{key:"deploymentName",label:"Deployment",placeholder:"deployment"}].map(({key:x,label:D,placeholder:k,type:B})=>e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75em",opacity:.7,marginBottom:"3px"},children:D}),e.jsx("input",{type:B||"text",value:q[x],onChange:A=>K(H=>({...H,[x]:A.target.value})),placeholder:k,style:{width:"100%",padding:"6px 8px",fontSize:"0.8em",borderRadius:"6px",border:"1px solid var(--blog-surface-border, #444)",background:"var(--blog-surface-background, #1a1a1a)",color:"var(--surface-text-color)",boxSizing:"border-box",outline:"none"}})]},x)),e.jsxs("button",{onClick:()=>{if(!q.endpoint||!q.apiKey){ae("Enter endpoint & API key above");return}ae(null),Se()},style:{marginTop:"6px",padding:"10px 14px",background:"linear-gradient(135deg, #6366f1, #4f46e5)",border:"none",borderRadius:"10px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"600",transition:"all 0.2s",boxShadow:"0 4px 14px rgba(99, 102, 241, 0.35)",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"40px"},children:[e.jsx("span",{children:"ðŸ¤–"}),e.jsx("span",{children:"Start AI vs LLM"})]})]}),de&&!ve&&o==="setup"&&e.jsx("div",{style:{marginTop:"8px",color:"#f87171",fontSize:"0.75em"},children:de})]})})]})});const it=o==="won"||o==="lost";return e.jsx("div",{style:{padding:"20px 0",margin:"20px 0",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"25px"},children:[e.jsx("div",{style:{position:"relative",width:"600px",flexShrink:0},children:e.jsx(Re,{humanMoves:a,computerMoves:c,userColor:C==="aivsllm"?"black":l,onMove:ot,disabled:C==="aivsllm"||o!=="playing"||u!=="human",lastMove:y,candidateMoves:M,winningLine:b})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",width:"180px",flexShrink:0,alignSelf:"stretch"},children:[e.jsx("div",{style:{color:"var(--surface-text-color)",padding:"15px",background:"var(--blog-surface-background)",borderRadius:"10px",border:"1px solid var(--blog-surface-border, #333)"},children:C==="aivsllm"?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.7em",opacity:.6,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},children:"Mode"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9em"},children:[e.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"50%",flexShrink:0,background:"radial-gradient(circle at 30% 30%, #fff, #d4d4d4)",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"}}),e.jsx("span",{style:{fontWeight:"600"},children:"AI"}),e.jsx("span",{style:{opacity:.4,fontSize:"0.85em"},children:"vs"}),e.jsx("span",{style:{fontWeight:"600"},children:"LLM"}),e.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"50%",flexShrink:0,background:"radial-gradient(circle at 30% 30%, #4a4a4a, #000)",boxShadow:"0 1px 4px rgba(0,0,0,0.4)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.7em",opacity:.6,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"6px"},children:"Playing as"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1.8em"},children:l==="black"?"âš«":"âšª"}),e.jsx("span",{style:{fontWeight:"600",fontSize:"1.1em"},children:l==="black"?"Black":"White"})]})]})}),o==="playing"&&e.jsx("div",{style:{padding:"12px 15px",background:C==="aivsllm"?u==="human"?"linear-gradient(135deg, #1a1a1a, #333)":"linear-gradient(135deg, #6366f1, #4f46e5)":u==="human"?"linear-gradient(135deg, #6366f1, #4f46e5)":"linear-gradient(135deg, #f59e0b, #d97706)",borderRadius:"10px",color:"#fff",fontWeight:"600",fontSize:"0.9em",textAlign:"center",boxShadow:u==="human"?"0 4px 14px rgba(99, 102, 241, 0.35)":"0 4px 14px rgba(245, 158, 11, 0.35)"},children:C==="aivsllm"?u==="human"?"â˜ï¸ LLM thinking...":"âš« AI thinking...":u==="human"?"ðŸŽ¯ Your Turn":"ðŸ¤– AI Thinking..."}),it&&e.jsxs("div",{style:{padding:"15px",background:o==="won"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",borderRadius:"10px",textAlign:"center",boxShadow:o==="won"?"0 4px 14px rgba(16, 185, 129, 0.35)":"0 4px 14px rgba(239, 68, 68, 0.35)"},children:[e.jsx("div",{style:{fontSize:"1.5em",marginBottom:"6px"},children:o==="won"?"ðŸŽ‰":"ðŸ˜”"}),e.jsx("div",{style:{color:"#fff",fontWeight:"600",fontSize:"1em"},children:C==="aivsllm"?o==="won"?"Local AI Won!":"LLM Won!":o==="won"?"You Won!":"AI Won"})]}),de&&C==="aivsllm"&&e.jsx("div",{style:{padding:"10px 14px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"10px",color:"#f87171",fontSize:"0.78em",wordBreak:"break-word"},children:de}),e.jsxs("div",{style:{marginTop:"auto",display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("button",{onClick:rt,style:{padding:"12px 15px",background:"linear-gradient(135deg, #6366f1, #4f46e5)",border:"none",borderRadius:"10px",color:"#fff",cursor:"pointer",fontSize:"0.9em",fontWeight:"500",transition:"all 0.2s",boxShadow:"0 4px 14px rgba(99, 102, 241, 0.35)",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"44px"},children:[e.jsx("span",{children:"ðŸ”„"}),e.jsx("span",{children:"Restart"})]}),e.jsxs("button",{onClick:st,style:{padding:"12px 15px",background:"transparent",border:"1px solid var(--blog-surface-border, #ccc)",borderRadius:"10px",color:"var(--surface-text-color)",cursor:"pointer",fontSize:"0.9em",fontWeight:"500",transition:"all 0.2s",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",minHeight:"44px"},children:[e.jsx("span",{children:"âš™ï¸"}),e.jsx("span",{children:"New Game"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",cursor:"pointer",color:"var(--surface-text-color)",fontSize:"0.85em",padding:"12px 15px",margin:0,background:w?"rgba(34, 197, 94, 0.12)":"var(--blog-surface-background)",borderRadius:"10px",border:w?"1px solid rgba(34, 197, 94, 0.4)":"1px solid var(--blog-surface-border, #333)",transition:"all 0.2s",width:"100%",boxSizing:"border-box",minHeight:"44px"},children:[e.jsx("input",{type:"checkbox",checked:w,onChange:x=>E(x.target.checked),style:{display:"none"}}),e.jsx("div",{style:{width:"36px",height:"20px",background:w?"linear-gradient(135deg, #22c55e, #16a34a)":"var(--blog-surface-border, #555)",borderRadius:"10px",position:"relative",transition:"all 0.2s",flexShrink:0,boxShadow:w?"0 2px 8px rgba(34, 197, 94, 0.3)":"none"},children:e.jsx("div",{style:{width:"16px",height:"16px",background:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:w?"18px":"2px",transition:"all 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})}),e.jsxs("span",{style:{lineHeight:"1"},children:[w?"ðŸ”Š":"ðŸ”‡"," Sound"]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",cursor:"pointer",color:"var(--surface-text-color)",fontSize:"0.85em",padding:"12px 15px",margin:0,background:f?"rgba(99, 102, 241, 0.12)":"var(--blog-surface-background)",borderRadius:"10px",border:f?"1px solid rgba(99, 102, 241, 0.4)":"1px solid var(--blog-surface-border, #333)",transition:"all 0.2s",width:"100%",boxSizing:"border-box",minHeight:"44px"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:x=>L(x.target.checked),style:{display:"none"}}),e.jsx("div",{style:{width:"36px",height:"20px",background:f?"linear-gradient(135deg, #6366f1, #4f46e5)":"var(--blog-surface-border, #555)",borderRadius:"10px",position:"relative",transition:"all 0.2s",flexShrink:0,margin:"0px",boxShadow:f?"0 2px 8px rgba(99, 102, 241, 0.3)":"none"},children:e.jsx("div",{style:{width:"16px",height:"16px",background:"#fff",borderRadius:"50%",position:"absolute",margin:"0px",top:"2px",left:f?"18px":"2px",transition:"all 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})}),e.jsx("span",{style:{lineHeight:"1.3"},children:"Visualize AI"})]}),C==="aivsllm"&&e.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",cursor:"pointer",color:"var(--surface-text-color)",fontSize:"0.85em",padding:"12px 15px",margin:0,background:oe?"rgba(245, 158, 11, 0.12)":"var(--blog-surface-background)",borderRadius:"10px",border:oe?"1px solid rgba(245, 158, 11, 0.4)":"1px solid var(--blog-surface-border, #333)",transition:"all 0.2s",width:"100%",boxSizing:"border-box",minHeight:"44px"},children:[e.jsx("input",{type:"checkbox",checked:oe,onChange:x=>Qe(x.target.checked),style:{display:"none"}}),e.jsx("div",{style:{width:"36px",height:"20px",background:oe?"linear-gradient(135deg, #f59e0b, #d97706)":"var(--blog-surface-border, #555)",borderRadius:"10px",position:"relative",transition:"all 0.2s",flexShrink:0,boxShadow:oe?"0 2px 8px rgba(245, 158, 11, 0.3)":"none"},children:e.jsx("div",{style:{width:"16px",height:"16px",background:"#fff",borderRadius:"50%",position:"absolute",top:"2px",left:oe?"18px":"2px",transition:"all 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})}),e.jsx("span",{style:{lineHeight:"1.3"},children:"Threat Hints"})]})]}),e.jsxs("div",{style:{color:"var(--surface-text-color)",padding:"12px 15px",background:"var(--blog-surface-background)",borderRadius:"10px",border:"1px solid var(--blog-surface-border, #333)",fontSize:"0.85em"},children:[e.jsxs("div",{style:{fontWeight:"500",textAlign:"center",marginBottom:"8px"},children:["Move #",Math.ceil(m/2)]}),C!=="aivsllm"&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9em",opacity:.8},children:[e.jsx("span",{children:"Difficulty:"}),e.jsxs("span",{style:{fontWeight:"500"},children:[fe[X]?.emoji," ",fe[X]?.label]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9em",opacity:.8,marginTop:"4px"},children:[e.jsx("span",{children:"Max Depth:"}),e.jsx("span",{style:{fontWeight:"500"},children:N})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9em",opacity:.8,marginTop:"4px"},children:[e.jsx("span",{children:"Current Depth:"}),e.jsx("span",{style:{fontWeight:"500"},children:P??"â€”"})]})]})]})]})})}class Ht extends lt.Component{componentDidMount(){window.scrollTo(0,0),document.title="Renju - A Strategic Board Game with AI | blog by Pranshu Gupta"}render(){return e.jsxs("div",{className:"language-javascript",children:[e.jsx("div",{className:"row bhead",children:e.jsx(ct,{className:"bigger gt1"})}),e.jsx("h1",{className:"title",children:"Renju - A Strategic Board Game with AI"}),e.jsx("p",{children:"Pranshu Gupta, February 15, 2026"}),e.jsx(pt,{link:window.location.href,title:"Renju - A Strategic Board Game with AI"}),e.jsx("p",{className:"introduction",children:'Renju, also known as "Five in a Row" or Gomoku, is a classic strategic board game that has been played for centuries across Asia and beyond. I present a modern web implementation of Renju using React, complete with an AI opponent powered by the minimax algorithm with alpha-beta pruning.'}),e.jsx("hr",{style:{backgroundColor:"white"}}),e.jsx("h2",{className:"headings",children:"Play the Game"}),e.jsx("p",{children:"Renju is deceptively simple in its rules but offers surprising strategic depth:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Objective:"})," Be the first player to create an unbroken line of five stones on the board"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Board:"})," Played on a 15Ã—15 grid (similar to Go)"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Turns:"})," Players alternate placing stones, with black always going first"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Victory:"})," Five consecutive stones in any direction (horizontal, vertical, or diagonal) wins"]})]}),e.jsx(Ke,{mode:"pvai"}),e.jsxs("p",{children:["The AI uses minimax search with alpha-beta pruning with ",e.jsx("b",{children:"adaptive difficulty"})," - it learns from each game! If you win, the AI increases its search depth (max 10) to become more challenging. If you lose, it decreases depth (min 2) to give you a better chance. The current and max depth are displayed during gameplay. Choose your stone color and see if you can beat it!"]}),e.jsx("p",{children:"While the rules are simple, mastering Renju requires thinking several moves ahead, recognizing patterns, and understanding both offensive and defensive strategies."}),e.jsx("h3",{style:{color:"#f6ad55",marginTop:"30px"},children:"ðŸ¤– AI vs LLM Mode"}),e.jsx("p",{children:"Beyond playing against the AI yourself, you can also pit the local minimax AI against a large language model (LLM) and watch them battle it out. In this mode, the LLM plays as Black (first move) and the local AI plays as White. The game runs automatically - you just sit back and observe."}),e.jsxs("p",{children:["To use this mode, you'll need access to an Azure OpenAI deployment. Enter your endpoint, deployment name, and API key in the configuration panel on the right side of the game, then hit ",e.jsx("b",{children:"Start AI vs LLM"}),". The LLM receives a text representation of the board along with strategic guidance and responds with its next move in algebraic notation (e.g. H8)."]}),e.jsx(Ke,{mode:"aivsllm"}),e.jsx("p",{children:"A few things make this mode interesting:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("b",{children:"Threat Hints:"})," You can toggle whether the LLM receives pre-computed threat analysis in its prompt. With hints enabled, the prompt includes specific blocking coordinates for the opponent's open threes and fours - without them, the LLM must figure out threats on its own from the raw board state."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Adaptive Difficulty (reversed):"})," The difficulty adjustment works in reverse here. When the local AI wins, its search depth ",e.jsx("i",{children:"decreases"})," to give the LLM a better chance. When the LLM wins, the AI gets harder. This creates an interesting dynamic where the AI calibrates itself to the LLM's skill level."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Visualize AI:"}),` You can enable the "Visualize AI" toggle to watch the minimax algorithm explore candidate moves in real time during the local AI's turn.`]})]}),e.jsx("p",{children:"It's a fun way to see how a general-purpose language model stacks up against a purpose-built game-playing algorithm - and spoiler: the minimax AI usually wins, but the LLM can occasionally pull off surprising moves!"}),e.jsxs("div",{style:{background:"rgba(66, 153, 225, 0.1)",border:"1px solid #4299e1",borderRadius:"4px",padding:"20px",marginTop:"30px"},children:[e.jsxs("h4",{style:{color:"#4299e1",marginBottom:"10px"},children:[e.jsx(dt,{style:{marginRight:"10px"}}),"Fun Fact"]}),e.jsx("p",{style:{marginBottom:0},children:"In 2001, researchers proved that with perfect play, the first player (Black) always wins in standard Gomoku. This led to the creation of Renju, which adds special rules to balance the game. In this implementation, the AI uses adaptive difficulty - it gets stronger when you win and easier when you lose, creating a personalized challenge that grows with your skill!"})]}),e.jsx("hr",{style:{backgroundColor:"white"}}),e.jsx("h2",{className:"headings",children:"Source Code"}),e.jsx("p",{children:"The complete source code for this project is available on GitHub. You can run it locally or deploy it to any static hosting service. The game demonstrates how classic game-playing algorithms can create engaging experiences in modern web applications."}),e.jsx("p",{children:"Whether you're interested in game AI, React development, or just enjoy strategic board games, I hope this project provides both entertainment and educational value. Challenge the AI and see how you stack up!"}),e.jsxs("a",{href:"https://github.com/Pranshu258/Pranshu258.github.io/tree/react/src/renju",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"linear-gradient(135deg, #24292e, #1a1e22)",color:"#fff",borderRadius:"8px",textDecoration:"none",fontWeight:"600",fontSize:"0.95em",marginTop:"15px",marginBottom:"15px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.2s"},children:[e.jsx("svg",{height:"20",width:"20",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"View Source on GitHub"]}),e.jsx("hr",{style:{backgroundColor:"white"}})]})}}export{Ht as default};
